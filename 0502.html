<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf=8">
        <style>
            #box{
                width:600px;
                height:600px;
                background: orange;
            }
            #p1{
                width:50px;
                height:71px;
                background-image: url("sprites.png");
                animation: a1 1s step(3) infinite;
            }
            @keyframes a1 {
                0%{background-position-x: 0px;}
                100%{background-position-x: -153px;}
            }
        </style>
        <script>
            var targetX = 65, targetY = 25, p1X = 0, piY = 0;
            function get(id){
                return document.getElementById(id);
            }
            function myKey(ev){
                ev.preventDefault();
                if(ev.key==ArrowUp){
                    get("p1").style.backgroundPositionY="-213px";
                } else if(ev.key==ArrowDown){
                    get("p1").style.backgroundPositionY="0px";
                } else if(ev.key==ArrowLeft){
                    get("p1").style.backgroundPositionY="-71px";
                } else if(ev.key==ArrowRight){
                    get("p1").style.backgroundPositionY="-142px";
                }    
            }
            function move(ev){
                targetY = ev.y - 65;
                targetX = ev.x - 25;
                t1 = setInterval(moving, 50);
            }
            function moving(){
                if(p1X == targetX && p1Y == targetY) clearInterval(t1);
                if(p1X < targetX) p1X++;
                else if(p1X > targetX) p1X--;
                if(p1Y < targetY) p1Y++;
                else if(p1Y > targetY) p1Y--;
                get("p1").style.top= p1Y+"px";
                get("p1").style.left= p1X+"px";
            }
        </script>
    </head>
    <body onkeydown="myKey(event);">
        <div id="box" onclick="move(event);"><div id="p1"></div></div>
    </body>
</html>
